<!DOCTYPE HTML>
<html>
<head>
<title>Citizens KC</title>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-2.0.3.min.js"></script>
<script type="text/javascript">

//initialize jQuery on ready
$(document).ready(function() {

    /*Variables*/
    var site = "http://clients.nharmony.com/";


    //initialize Cordova
    document.addEventListener("deviceready", onDeviceReady, false);

    //separated out to allow other checks in the future
    function onDeviceReady(){
        checkConnection();    
    }

    //Checks the connection and displays appropriate messages
    function checkConnection() {    
       /* Cordova's network manager. Needs permissions in config.xml. 
        * Documentation @ http://docs.phonegap.com/en/3.0.0/cordova_connection_connection.md.html */
        var networkState = navigator.connection.type;

        if( networkState === 'NONE'){
            $('div#no-network').css('display','block');
        }

        else {
            window.location.href=site; 
        }


        // else {  
        //     //Check to make sure the site is reachable
        //     $.ajax({ 
        //         url: site, 
        //         complete: function(xhr, statusText) { 
        //             alert(xhr.status); 
        //         } 
        //     }); 

        // if (error is <400){
        // $('div#site-not-reachable').css('display','block');
        // }
        // else{
        
        // }
        // }
    }
});
</script>
<style>
    body{
        background-color: rgb(116, 155, 152);
    }
    #no-network, #site-not-reachable{
        display: none;
    }
</style>
</head>
<body>
    <!-- Spinner animation -->
    <div id="spinner">
        <p>Spinner here</p>
        <img src="spinner.gif"></img>
    </div>

    <!-- No network error message -->
    <div id="no-network">
        <h2>No Network. Please try again</h2>
        <button>Retry</button>
    </div>

    <!-- Network connects, but the site is unreachable -->
    <div id="site-not-reachable">
        <h2>The site is not reachable. Please try again</h2>
        <button>Retry</button>
    </div>

</body>
</html>