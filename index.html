<!DOCTYPE HTML>
<html>
<head>
<title>Citizens KC</title>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-2.0.3.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=0">

    <link rel="stylesheet" type="text/css" href="./css/cssReset.css">
    <link rel="stylesheet" type="text/css" href="./css/cms.css">
    <link rel="stylesheet" type="text/css" href="./css/fontello.css">
    <link rel="stylesheet" type="text/css" href="./css/home.layout.css">
    <link rel="stylesheet" type="text/css" href="./css/home.style.css">
    <link rel="stylesheet" type="text/css" href="./css/navigation_drawer.layout.css">
<script type="text/javascript">

/*Variables*/
var site = "http://clients.nharmony.com/";

//initialize jQuery on ready
$(document).ready(function() {
    //initialize Cordova
    document.addEventListener("deviceready", onDeviceReady, false);

    //separated out to allow other checks in the future
    function onDeviceReady(){
        checkConnection();    
    }

    //Checks the connection and displays appropriate messages
    function checkConnection() {    
       /* Cordova's network manager. Needs permissions in config.xml. 
        * Documentation @ http://docs.phonegap.com/en/3.0.0/cordova_connection_connection.md.html */
        var networkState = navigator.connection.type;

        if( networkState === 'NONE'){
            $('div#no-network').css('display','block');
        }

        else {
            window.location.href=site; 

            //Check to make sure the site is reachable
            // $.ajax({ 
            //     url: site, 
            //     complete: function(xhr, statusText) { 
            //         alert(xhr.status); 
            //     } 
            // }); 

            // if (error is <400){
            // $('div#spinner').css('display','none');
            // $('div#site-not-reachable').css('display','block');
            // }
            // else{
            //

        }
    }
});

function gotosite(){
    window.location.href=site;
}

</script>
<style>
    #no-network, #site-not-reachable{
        display: none;
    }
    #spinner{
        position: relative;
        top: 50%;
        margin-top: -40px;
    }
</style>
</head>
<body data-resourceid="2" style="-webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
    <div class="structure_mode_background"></div>
    <div class="backgrounder"></div>
        <!-- header -->
        <div class="header show-content" style="position: fixed;">
            <button class="back" data-button="back">
                <span class="">
                    <img src="./css/kcbank_logo.gif" height="25">
                </span>
            </button>
            <h1>Welcome</h1>            
        </div>
        <!-- /header -->
    <div id="root-container">
        <!-- nav -->
        <!-- /nav -->

        <!-- content -->
        <div class="content show-content" data-role="content">
            <div class="inner-content" style="text-align:center; height: 500px">
                
                <div id="spinner">
                    <img style="text-align:center; margin: 0 auto;" src="./css/spinner.gif"></img>
                </div>
                <!-- No network error message -->
                <div id="no-network">
                    <h2>No Network. Please try again</h2>
                    <button onclick="gotosite();">Retry</button>
                </div>

                <!-- Network connects, but the site is unreachable -->
                <div id="site-not-reachable">
                    <h2>The site is not reachable. Please try again</h2>
                    <button onclick="gotosite();">Retry</button>
                </div>

            </div>
        </div>
        <!-- /content -->

        <!--footer -->
        <div class="footer  show-content" style="position: fixed;">
            <div id="region_footer" class="region_container" data-name="footer" data-type="Global"></div>
            <p align="center">
                <img src="./css/nHarmonyFooter.png">
            </p>
        </div>
        <!-- /footer -->
</body>

</html>





